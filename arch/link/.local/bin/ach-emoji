#!/bin/sh

windowid=$(xdotool getactivewindow)

# file should just contain searchable emoji:
# https://raw.githubusercontent.com/valeriangalliat/dmenumoji/master/emoji.txt
emojipath="$HOME/.local/share/emoji.txt"
[ -e "$emojipath" ] || exit 1

# don't -c dmenu. For some reason large files make it really slow
emoji=$(dmenu -l 20 -i < "$emojipath" | awk '{print $1}')

[ "$emoji" = "" ] && exit 1

printf "%s" "$emoji" | xsel --clipboard
xdotool windowactivate "$windowid"

dunstify -a ach-emoji "Emoji" "Copied emoji" -u low
