#!/bin/sh

# Fix java apps inside dwm
export _JAVA_AWT_WM_NONREPARENTING=1

# Clipmenu env variables
# Theoretically this shouldn't be here because clipmenu should run in all WMs
export CM_IGNORE_WINDOW="Bitwarden"
export CM_SELECTIONS="clipboard"
export CM_LAUNCHER="rofi"
export CM_HISTLENGTH=25

# Clipboard manager
clipmenud &

# nm applet should connect me to the internet. This should be replaced with a
# non-tray service. I'm not entirely sure what to do about this
nm-applet &

# Same with blueman. I'd like to find some cli for this and a daemon that auto
# connects my mouse and headphones. The problem with this app is that it's
# tray-based and I'd rather avoid tray apps as much as I can.
blueman-applet &

# Sxhkd for global hotkeys. This should eventually be moved to .xinitrc
sxhkd &

# Same for xss-lock. This does not depend on dwm. Note that in some cases
# xsecurelock can make dwm crash because of picom. I have yet to reproduce this
# because I've only seen it crash once. I remember locking the screen with a
# full screen video active in the wm. Maybe that + a notification caused it
xss-lock -n /usr/lib/xsecurelock/dimmer -l -- xsecurelock &

# These daemons are specific to dwm:
# ach-pa-daemon monitors volume and bluetooth sink status if there's any
# ach-nm-daemon monitors ethernet and wifi networking
# "a.out" monitors caps status
# All of these should either go into my dotfiles or moved to a dwm-utils repo
ach-pa-daemon &
ach-nm-daemon &

# Restarting dwm. This can result in window rearrangement to tag 1 which can be
# very annoying. Should be removed once I'm done with dwm configuration
while true;
do
    dwm 2> ~/.dwm.log
done
