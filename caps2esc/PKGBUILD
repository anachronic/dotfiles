# Maintainer: Francisco Lopes <francisco@oblita.com>
pkgname=caps2esc-git
pkgver=1.0.4
pkgrel=1
pkgdesc="caps2esc: anachronic's own fork"
arch=('x86_64')
license=('GPL3')
url="https://github.com/anachronic/caps2esc"
depends=('libevdev')
makedepends=('gcc')
source=("https://raw.githubusercontent.com/anachronic/caps2esc/master/caps2esc.c"
        "https://raw.githubusercontent.com/anachronic/caps2esc/master/LICENSE.md"
        'caps2esc.service')
md5sums=('f35d6483af611c9aa24d6ee71f8a53b8'
         '5ce903a740b8b693400618c62409e14d'
         '404cfae39ca29735e26e2c37f93fe6b1')

build() {
    gcc caps2esc.c -o caps2esc -I/usr/include/libevdev-1.0 -levdev -ludev
}

package() {
    mkdir -p "${pkgdir}/usr/bin"
    install -m 755 caps2esc "${pkgdir}/usr/bin"

    mkdir -p "${pkgdir}/usr/share/licenses/${pkgname}"
    install -m 444 LICENSE.md "${pkgdir}/usr/share/licenses/${pkgname}"

    mkdir -p "${pkgdir}/usr/lib/systemd/system"
    install -m 644 "${srcdir}/caps2esc.service" "${pkgdir}/usr/lib/systemd/system"
}
